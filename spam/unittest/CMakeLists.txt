add_compile_options("/utf-8")
add_executable(test_SpamRgn rgn_unittest.cpp helper.cpp helper.h ${PROJECT_SOURCE_DIR}/spam/ui/proc/rgn.cpp ${PROJECT_SOURCE_DIR}/spam/ui/proc/basic.cpp)
target_include_directories(test_SpamRgn PRIVATE ${CMAKE_BINARY_DIR}/include)

set(libs)
list(APPEND libs CAIRO::cairo)
list(APPEND libs CAIROMM::CAIROMM)
list(APPEND libs 2geom)
list(APPEND libs TBB::tbb TBB::tbbmalloc)
list(APPEND libs opencv_core)
list(APPEND libs opencv_imgcodecs)
list(APPEND libs Boost::filesystem)
list(APPEND libs Boost::thread)
list(APPEND libs Boost::locale)
list(APPEND libs Boost::system)
list(APPEND libs Freetype::Freetype)
list(APPEND libs Pixman::Pixman)
list(APPEND libs PNG::PNG)
list(APPEND libs JPEG::jpeg)
list(APPEND libs JPEG::turbo)
list(APPEND libs TIFF::TIFF)
list(APPEND libs FontConfig::FontConfig)
list(APPEND libs BZip2::BZip2)
list(APPEND libs EXPAT::EXPAT)
list(APPEND libs LIBLZMA::LIBLZMA)
list(APPEND libs Iconv::Iconv)
list(APPEND libs Iconv::charset)
list(APPEND libs "sigc-3.0")
list(APPEND libs GLIB::glib)
list(APPEND libs GLIB::gobject)
list(APPEND libs GSL::gsl)
list(APPEND libs GSL::gslcblas)

target_link_libraries(test_SpamRgn PRIVATE ${libs})

if(MSVC)
  target_compile_definitions(test_SpamRgn PRIVATE _SILENCE_ALL_CXX17_DEPRECATION_WARNINGS _CRT_SECURE_NO_WARNINGS _CRTDBG_MAP_ALLOC NOMINMAX)
  target_compile_options(test_SpamRgn PRIVATE "/MP")
endif()